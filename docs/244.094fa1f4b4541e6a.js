"use strict";(self.webpackChunkangular_final_project=self.webpackChunkangular_final_project||[]).push([[244],{9244:(q,p,a)=>{a.r(p),a.d(p,{AuthModule:()=>U});var u=a(2494),e=a(4006),t=a(4650),g=a(8949),d=a(6895),c=a(4859),m=a(9549),f=a(4144);function h(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}function Z(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}function b(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}function y(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Enter a valid email address"),t.qZA())}function A(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}let w=(()=>{class o{constructor(n,r){this.authService=n,this.router=r;const l={firstName:new e.NI(null,[e.kI.required]),lastName:new e.NI(null,[e.kI.required]),username:new e.NI(null,[e.kI.required,e.kI.pattern("^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-]+)(\\.[a-zA-Z]{2,5}){1,2}$")]),password:new e.NI(null,[e.kI.required]),address:new e.NI(null),phone:new e.NI(null)};this.signupForm=new e.cw(l)}ngOnInit(){}attemptSignup(){this.authService.attemptSignup(this.signupForm.value).subscribe(r=>{if(200===r.status&&r.body?.username){const i={...r.body};this.authService.saveSessionWithoutStoring(i),this.router.navigate(["/products"])}},r=>{this.signupForm.reset(),alert("An account already exists for this email address. Please, try registering with a different address.")})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.$),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-signup"]],decls:41,vars:7,consts:[[1,"container","text-center","mb-3"],[1,"row","form-box","py-3","mx-auto"],[1,"text-white"],[3,"formGroup","ngSubmit"],["appearance","fill",1,"col-12","px-2"],["matInput","","formControlName","firstName",1,"text-white"],[4,"ngIf"],["matInput","","formControlName","lastName",1,"text-white"],["matInput","","formControlName","username",1,"text-white"],["matInput","","formControlName","password","type","password",1,"text-white"],["matInput","","formControlName","address",1,"text-white"],["matInput","","formControlName","phone",1,"text-white"],[1,"text-center"],["type","submit","mat-raised-button","","color","primary",1,"mx-3","my-1","w-25",3,"disabled"],["type","reset","mat-raised-button","","color","warn",1,"mx-3","my-1","w-25","text-white"],["routerLink","/auth/login","mat-raised-button","","color","accent",1,"mx-3","my-1","w-25"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Create account:"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return r.attemptSignup()}),t.TgZ(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"First name"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,h,2,0,"mat-error",6),t.qZA(),t.TgZ(10,"mat-form-field",4)(11,"mat-label"),t._uU(12,"Last name"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,Z,2,0,"mat-error",6),t.qZA(),t.TgZ(15,"mat-form-field",4)(16,"mat-label"),t._uU(17,"Email address"),t.qZA(),t._UZ(18,"input",8),t.YNc(19,b,2,0,"mat-error",6),t.YNc(20,y,2,0,"mat-error",6),t.qZA(),t.TgZ(21,"mat-form-field",4)(22,"mat-label"),t._uU(23,"Password"),t.qZA(),t._UZ(24,"input",9),t.YNc(25,A,2,0,"mat-error",6),t.qZA(),t.TgZ(26,"mat-form-field",4)(27,"mat-label"),t._uU(28,"Address"),t.qZA(),t._UZ(29,"input",10),t.qZA(),t.TgZ(30,"mat-form-field",4)(31,"mat-label"),t._uU(32,"Phone number"),t.qZA(),t._UZ(33,"input",11),t.qZA(),t.TgZ(34,"div",12)(35,"button",13),t._uU(36,"Sign up"),t.qZA(),t.TgZ(37,"button",14),t._uU(38,"Reset"),t.qZA(),t.TgZ(39,"button",15),t._uU(40,"Go to login"),t.qZA()()()()()),2&n&&(t.xp6(4),t.Q6J("formGroup",r.signupForm),t.xp6(5),t.Q6J("ngIf",r.signupForm.controls.firstName.dirty&&(null==r.signupForm.controls.firstName.errors?null:r.signupForm.controls.firstName.errors.required)),t.xp6(5),t.Q6J("ngIf",r.signupForm.controls.lastName.dirty&&(null==r.signupForm.controls.lastName.errors?null:r.signupForm.controls.lastName.errors.required)),t.xp6(5),t.Q6J("ngIf",r.signupForm.controls.username.dirty&&(null==r.signupForm.controls.username.errors?null:r.signupForm.controls.username.errors.required)),t.xp6(1),t.Q6J("ngIf",r.signupForm.controls.username.dirty&&(null==r.signupForm.controls.username.errors?null:r.signupForm.controls.username.errors.pattern)),t.xp6(5),t.Q6J("ngIf",r.signupForm.controls.password.dirty&&(null==r.signupForm.controls.password.errors?null:r.signupForm.controls.password.errors.required)),t.xp6(10),t.Q6J("disabled",!r.signupForm.valid))},dependencies:[d.O5,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,c.lW,m.TO,m.KE,m.hX,f.Nt],styles:[".form-box[_ngcontent-%COMP%]{border-radius:25px;border:2px solid #C2185BFF}mat-label[_ngcontent-%COMP%]{color:#fff}.form-box[_ngcontent-%COMP%]{width:90%}.form-box[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#c13fb2}"]}),o})();var F=a(6709);function T(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}function _(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Enter a valid email address"),t.qZA())}function v(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"This field cannot be empty"),t.qZA())}const C=[{path:"signup",component:w},{path:"login",component:(()=>{class o{constructor(n,r,i){this.authService=n,this.route=r,this.router=i;const x={username:new e.NI(null,[e.kI.required,e.kI.pattern("^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-]+)(\\.[a-zA-Z]{2,5}){1,2}$")]),password:new e.NI(null,[e.kI.required]),saveSession:new e.NI(!1)};this.loginForm=new e.cw(x)}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/products"}attemptLogin(){this.authService.attemptLogin({username:this.loginForm.value.username,password:this.loginForm.value.password}).subscribe(r=>{if(200===r.status&&r.body?.username){const i={...r.body};this.loginForm.value.saveSession?this.authService.saveSessionAndStore(i):this.authService.saveSessionWithoutStoring(i),this.router.navigateByUrl(this.returnUrl)}},r=>{this.loginForm.reset(),alert("Invalid credentials. Try again with a different combination.")})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.$),t.Y36(u.gz),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"container","text-center"],[1,"row","form-box","py-3","mx-auto"],[1,"text-white"],[3,"formGroup","ngSubmit"],["appearance","fill",1,"col-12","px-2"],["matInput","","formControlName","username",1,"text-white"],[4,"ngIf"],["matInput","","formControlName","password","type","password",1,"text-white"],["formControlName","saveSession",1,"text-white","mb-3"],[1,"text-center"],["type","submit","mat-raised-button","","color","primary",1,"mx-3","my-1","w-25",3,"disabled"],["type","reset","mat-raised-button","","color","warn",1,"mx-3","my-1","w-25","text-white"],["routerLink","/auth/signup","mat-raised-button","","color","accent",1,"mx-3","my-1","w-25"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Log in:"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return r.attemptLogin()}),t.TgZ(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Email address"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,T,2,0,"mat-error",6),t.YNc(10,_,2,0,"mat-error",6),t.qZA(),t.TgZ(11,"mat-form-field",4)(12,"mat-label"),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",7),t.YNc(15,v,2,0,"mat-error",6),t.qZA(),t.TgZ(16,"mat-checkbox",8),t._uU(17,"Remember me"),t.qZA(),t.TgZ(18,"div",9)(19,"button",10),t._uU(20,"Log in"),t.qZA(),t.TgZ(21,"button",11),t._uU(22,"Reset"),t.qZA(),t.TgZ(23,"button",12),t._uU(24,"Go to signup"),t.qZA()()()()()),2&n&&(t.xp6(4),t.Q6J("formGroup",r.loginForm),t.xp6(5),t.Q6J("ngIf",r.loginForm.controls.username.dirty&&(null==r.loginForm.controls.username.errors?null:r.loginForm.controls.username.errors.required)),t.xp6(1),t.Q6J("ngIf",r.loginForm.controls.username.dirty&&(null==r.loginForm.controls.username.errors?null:r.loginForm.controls.username.errors.pattern)),t.xp6(5),t.Q6J("ngIf",r.loginForm.controls.password.dirty&&(null==r.loginForm.controls.password.errors?null:r.loginForm.controls.password.errors.required)),t.xp6(4),t.Q6J("disabled",!r.loginForm.valid))},dependencies:[d.O5,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,c.lW,m.TO,m.KE,m.hX,f.Nt,F.oG],styles:[".form-box[_ngcontent-%COMP%]{border-radius:25px;border:2px solid #C2185BFF;width:90%}mat-label[_ngcontent-%COMP%]{color:#fff}.form-box[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#c13fb2}.mat-checkbox-layout[_ngcontent-%COMP%]{justify-content:flex-start}"]}),o})()}];let N=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(C),u.Bz]}),o})();var I=a(214),S=a(8990);let U=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[I.t,S.r,N]}),o})()}}]);